(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(31)},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(15),s=n.n(i),l=n(5),o=n(6),u=n(10),c=n(7),m=n(9),h=n(2),p=(n(23),function(e){return r.a.createElement("div",{className:"profile-flex"},r.a.createElement("div",{className:"profile-image"},r.a.createElement("img",{id:"profile-image",src:e.profilePicture,alt:"profile"})),r.a.createElement("div",{className:"profile-info"},r.a.createElement("div",null,e.username),r.a.createElement("div",null,"@",e.usernameShort),r.a.createElement("div",null,"Tweets: ",e.tweetCounter)))}),d=n(16),f=n.n(d),w=(n(24),function(e){return r.a.createElement("li",{className:"list-item"},r.a.createElement("div",{className:"tweet-picture-container"},r.a.createElement("img",{src:e.profilePicture,alt:"profile"})),r.a.createElement("div",{className:"tweet-content"},r.a.createElement("span",{className:"tweet-username"},"@",e.usernameShort," "),r.a.createElement(f.a,{className:"tweet-time",time:e.timesOfTweet,autoUpdate:!0}),r.a.createElement("p",null,e.tweet)))}),g=(n(25),function(e){return r.a.createElement("div",{className:"tweetbox-container"},r.a.createElement("ul",null,e.tweets.map(function(t,n){return r.a.createElement(w,{key:n,datakey:n,length:e.tweets.length,tweet:t,timesOfTweet:e.timesOfTweets[n],usernameShort:e.usernameShort,profilePicture:e.profilePicture})})))}),v=n(11),b=n.n(v),y=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=b.a.Widget(this.uploader),n=this.props,a=n.value,r=n.onChange,i=n.onUploadComplete;"undefined"!==typeof a&&t.value(a),"function"===typeof r&&t.onChange(function(t){e.files=t?e.files&&e.files.files?e.files.files():[e.files]:null,r(t)}),"function"===typeof i&&t.onUploadComplete(i),t.onDialogOpen(function(t){return e.dialog=t})}},{key:"componentWillUnmount",value:function(){this.dialog&&this.dialog.reject(),this.files&&b.a.jQuery.when.apply(null,this.files).cancel();var e=b.a.jQuery(this.uploader).next(".uploadcare--widget"),t=e.data("uploadcareWidget");t&&t.inputElement===this.uploader&&e.remove()}},{key:"getInputAttributes",value:function(){var e=Object.assign({},this.props);return delete e.value,delete e.onChange,delete e.onUploadComplete,e}},{key:"render",value:function(){var e=this,t=this.getInputAttributes();return r.a.createElement("input",Object.assign({type:"hidden",ref:function(t){return e.uploader=t}},t))}}]),t}(a.Component),E=n(12),O=(n(30),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={profilePicture:"logo.png",username:"",usernameShort:"",tweets:[],timesOfTweets:[],tweetValue:"",usernameValue:"",tweetCounter:0},n.handleTweetChange=n.handleTweetChange.bind(Object(h.a)(Object(h.a)(n))),n.handleTweetKeyDown=n.handleTweetKeyDown.bind(Object(h.a)(Object(h.a)(n))),n.post=n.post.bind(Object(h.a)(Object(h.a)(n))),n.usernameInput=n.usernameInput.bind(Object(h.a)(Object(h.a)(n))),n.usernameInputKeyHandler=n.usernameInputKeyHandler.bind(Object(h.a)(Object(h.a)(n))),n.client=E.c.initializeDefaultAppClient("twitter-clone-hgeer"),n.db=n.client.getServiceClient(E.b.factory,"mongodb-atlas").db("twitter-clone"),n.user=n.client.auth.loginWithCredential(new E.a),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"usernameInput",value:function(e){this.setState({usernameValue:e.target.value})}},{key:"usernameInputKeyHandler",value:function(e){"Enter"===e.key&&(e.target.value||alert("name can't be empty"),this.setState({username:this.state.usernameValue,usernameShort:this.state.usernameValue.toLowerCase().replace(/\s/g,"")}),this.postTweetAndUpdateDb())}},{key:"handleTweetChange",value:function(e){this.setState({tweetValue:e.target.value})}},{key:"handleTweetKeyDown",value:function(e){"Enter"===e.key&&this.post()}},{key:"post",value:function(){if(""!==this.state.tweetValue){var e=this.state.tweets,t=this.state.timesOfTweets,n=(new Date).getTime()/1e3;t.unshift(n),e.unshift(this.state.tweetValue),this.setState({tweets:e,timesOfTweets:t,tweetCounter:this.state.tweets.length,tweetValue:""}),this.postTweetAndUpdateDb()}}},{key:"postTweetAndUpdateDb",value:function(){var e=this;this.user.then(function(t){return e.db.collection("users").updateOne({owner_id:e.client.auth.user.id},{$set:{profilePicture:e.state.profilePicture,username:e.state.username,usernameShort:e.state.usernameShort,tweets:e.state.tweets,timesOfTweets:e.state.timesOfTweets,tweetCounter:e.state.tweetCounter}},{upsert:!0}).catch(function(e){console.error(e)})})}},{key:"uploadPicture",value:function(e){var t=this;this.user.then(function(n){return t.db.collection("users").updateOne({owner_id:t.client.auth.user.id},{$set:{profilePicture:"https://ucarecdn.com/"+e.uuid+"/-/resize/150x/"}},t.setState({profilePicture:"https://ucarecdn.com/"+e.uuid+"/-/resize/150x/"}),{upsert:!0}).catch(function(e){console.error(e)})})}},{key:"setIntitalState",value:function(){var e=this;this.user.then(function(){return e.db.collection("users").findOne({owner_id:e.client.auth.user.id})}).then(function(t){t&&e.setState({profilePicture:t.profilePicture||"logo.png",tweetCounter:t.tweetCounter,tweets:t.tweets,timesOfTweets:t.timesOfTweets,username:t.username,usernameShort:t.usernameShort})}).catch(function(e){console.error(e)})}},{key:"componentDidMount",value:function(){this.setIntitalState()}},{key:"render",value:function(){var e=this;return""===this.state.username?r.a.createElement("div",{className:"login-container animation"},r.a.createElement("div",{className:"logo-container"},r.a.createElement("img",{src:"logo.png",alt:"logo"})),r.a.createElement("p",null,"Welcome to Twudder (like a twitter, but with no annoying tweets)"),r.a.createElement("div",{className:"username-input-container"},r.a.createElement("input",{id:"username-input",type:"text",value:this.state.usernameValue,onChange:this.usernameInput,onKeyDown:this.usernameInputKeyHandler}),r.a.createElement("label",{className:"username-input-label",htmlFor:"username-input"},"Please enter your name and press Enter"))):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"profile-container"},r.a.createElement(p,{profilePicture:this.state.profilePicture,username:this.state.username,usernameShort:this.state.usernameShort,tweetCounter:this.state.tweetCounter}),r.a.createElement("div",{className:"uploader"},r.a.createElement("label",{htmlFor:"file"},"Change Picture:")," ",r.a.createElement(y,{id:"file",name:"file","data-tabs":"file camera",onChange:function(e){console.log("File changed: ",e),e&&(e.progress(function(e){return console.log("File progress: ",e.progress)}),e.done(function(e){return console.log("File uploaded: ",e)}))},onUploadComplete:function(t){return e.uploadPicture(t)}}))),r.a.createElement("div",{className:"tweets-container"},r.a.createElement("div",{className:"post-container"},r.a.createElement("input",{id:"post",type:"text",value:this.state.tweetValue,onChange:this.handleTweetChange,onKeyDown:this.handleTweetKeyDown}),r.a.createElement("label",{className:"post-label",htmlFor:"post"},"Please enter your tweet and press Enter")),r.a.createElement(g,{tweets:this.state.tweets,timesOfTweets:this.state.timesOfTweets,usernameShort:this.state.usernameShort,profilePicture:this.state.profilePicture})))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.5a00e54b.chunk.js.map